(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{385:function(t,e,r){"use strict";r.r(e);var s=r(50),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"项目介绍"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#项目介绍"}},[t._v("#")]),t._v(" 项目介绍")]),t._v(" "),r("p",[t._v("本脚手架使用了 "),r("a",{attrs:{href:"https://umijs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("umi@3"),r("OutboundLink")],1),t._v(" + "),r("a",{attrs:{href:"http://www.typescriptlang.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("typescript"),r("OutboundLink")],1),t._v("， 以及 "),r("a",{attrs:{href:"https://ant.design",target:"_blank",rel:"noopener noreferrer"}},[t._v("antd@4"),r("OutboundLink")],1),t._v("。对这三样完全不熟悉的朋友，强烈建议先做了解之后再来。（再见）")]),t._v(" "),r("p",[t._v("其次，本脚手架没有使用 "),r("a",{attrs:{href:"https://umijs.org/plugins/preset-react",target:"_blank",rel:"noopener noreferrer"}},[t._v("preset-react"),r("OutboundLink")],1),t._v("，而是单独使用了 "),r("a",{attrs:{href:"https://umijs.org/plugins/plugin-access",target:"_blank",rel:"noopener noreferrer"}},[t._v("plugin-access"),r("OutboundLink")],1),t._v("、"),r("a",{attrs:{href:"https://umijs.org/plugins/plugin-antd",target:"_blank",rel:"noopener noreferrer"}},[t._v("plugin-antd"),r("OutboundLink")],1),t._v("、"),r("a",{attrs:{href:"https://umijs.org/plugins/plugin-initial-state",target:"_blank",rel:"noopener noreferrer"}},[t._v("plugin-initial-state"),r("OutboundLink")],1),t._v("、"),r("a",{attrs:{href:"https://umijs.org/plugins/plugin-locale",target:"_blank",rel:"noopener noreferrer"}},[t._v("plugin-locale"),r("OutboundLink")],1),t._v("、"),r("a",{attrs:{href:"https://umijs.org/plugins/plugin-model",target:"_blank",rel:"noopener noreferrer"}},[t._v("plugin-model"),r("OutboundLink")],1),t._v("、"),r("a",{attrs:{href:"https://umijs.org/plugins/plugin-request",target:"_blank",rel:"noopener noreferrer"}},[t._v("plugin-request"),r("OutboundLink")],1),t._v("、"),r("a",{attrs:{href:"https://github.com/chenshuai2144/umi-plugin-antd-theme",target:"_blank",rel:"noopener noreferrer"}},[t._v("umi-plugin-antd-theme"),r("OutboundLink")],1),t._v("。并通过内置的 "),r("RouterLink",{attrs:{to:"/guide/route.html"}},[t._v("路由系统")]),t._v(" 和 "),r("RouterLink",{attrs:{to:"/guide/layout.html"}},[t._v("布局系统")]),t._v(" 来完成权限路由和布局选择的功能。目的是为开发者提供一个扩展性更强的 code base。")],1),t._v(" "),r("p",[t._v("所以对上述使用到的插件不熟悉的朋友，也需要先了解之后再往下看，再见。")]),t._v(" "),r("p",[t._v("接下来，就是介绍脚手架的部分了。首先介绍下项目结构：")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[t._v(".\n├── config/\n├── mock/\n├── public/\n├── server/\n├── shells/\n├── src\n│   ├── access.ts\n│   ├── app.ts\n│   └── serve.package.json\n├── Dockerfile\n├── package.json\n├── tsconfig.json\n└── typings.d.ts\n")])])]),r("h2",{attrs:{id:"项目结构介绍"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#项目结构介绍"}},[t._v("#")]),t._v(" 项目结构介绍")]),t._v(" "),r("h3",{attrs:{id:"dockerfile"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[t._v("#")]),t._v(" Dockerfile")]),t._v(" "),r("p",[t._v("希望打包成 "),r("code",[t._v("docker")]),t._v(" 镜像时使用。")]),t._v(" "),r("h3",{attrs:{id:"package-json"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[t._v("#")]),t._v(" package.json")]),t._v(" "),r("p",[t._v("没什么好说的，依赖管理")]),t._v(" "),r("h3",{attrs:{id:"tsconfig-json"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#tsconfig-json"}},[t._v("#")]),t._v(" tsconfig.json")]),t._v(" "),r("p",[t._v("希望使用 "),r("code",[t._v("typescript")]),t._v(" 编码的核心配置文件，勿动（除非你知道自己在干嘛）。")]),t._v(" "),r("h3",{attrs:{id:"typings-d-ts"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#typings-d-ts"}},[t._v("#")]),t._v(" typings.d.ts")]),t._v(" "),r("p",[t._v("希望在 "),r("code",[t._v(".ts")]),t._v("、"),r("code",[t._v(".tsx")]),t._v(" 模块中，引入"),r("code",[t._v(".css")]),t._v("、"),r("code",[t._v(".less")]),t._v("、"),r("code",[t._v(".png")]),t._v("、"),r("code",[t._v(".jpg")]),t._v(" 而不产生语法错误的核心配置文件，勿动（除非你知道自己在干嘛）。")]),t._v(" "),r("h3",{attrs:{id:"config-目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#config-目录"}},[t._v("#")]),t._v(" config 目录")]),t._v(" "),r("p",[r("code",[t._v("umi")]),t._v(" 配置文件支持 "),r("code",[t._v("<root>/.umirc.ts")]),t._v(" 或者 "),r("code",[t._v("<root>/config/config.ts")]),t._v(" 二选一（共存时，仅 "),r("code",[t._v(".umitc.ts")]),t._v(" 有效）。")]),t._v(" "),r("p",[t._v("我们脚手架里采用了 "),r("code",[t._v("<root>/config/config.ts")]),t._v(" 形式")]),t._v(" "),r("h3",{attrs:{id:"mock-目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mock-目录"}},[t._v("#")]),t._v(" mock 目录")]),t._v(" "),r("p",[t._v("存储 "),r("code",[t._v("mock")]),t._v(" 文件，此目录下所有 "),r("code",[t._v(".js")]),t._v(" 和 "),r("code",[t._v(".ts")]),t._v(" 文件会被解析为 "),r("code",[t._v("mock")]),t._v(" 文件。")]),t._v(" "),r("h3",{attrs:{id:"public-目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#public-目录"}},[t._v("#")]),t._v(" public 目录")]),t._v(" "),r("p",[t._v("此目录下所有文件会被 "),r("code",[t._v("copy")]),t._v(" 到输出路径。")]),t._v(" "),r("h3",{attrs:{id:"server-目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#server-目录"}},[t._v("#")]),t._v(" server 目录")]),t._v(" "),r("p",[t._v("脚手架内置的服务启动脚本("),r("code",[t._v("express")]),t._v(" + "),r("code",[t._v("replace-in-file")]),t._v(")，为打包后的内容提供直接启用支持，无需外部再配置 "),r("code",[t._v("nginx")]),t._v(" 或其他 web 容器。")]),t._v(" "),r("p",[t._v("并且在 "),r("code",[t._v("docker")]),t._v(" 镜像方式里，支持容器启动 + 环境变量修改部分配置。（这种方式在一个包，需要不同配置运行在不同环境里非常好用，无需为不同环境打不同的包）。")]),t._v(" "),r("h3",{attrs:{id:"shells-目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#shells-目录"}},[t._v("#")]),t._v(" shells 目录")]),t._v(" "),r("p",[t._v("打包、运行脚本。")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("build.sh")]),t._v("：打包（"),r("code",[t._v(".zip")]),t._v("、"),r("code",[t._v("docker")]),t._v("均使用它）")]),t._v(" "),r("li",[r("code",[t._v("git.sh")]),t._v("：本地 "),r("code",[t._v("git")]),t._v(" 环境配置命令集合（配置当前仓库的 用户名、邮箱、"),r("code",[t._v("git")]),t._v(" 别名等）")]),t._v(" "),r("li",[r("code",[t._v("stop.sh")]),t._v("："),r("code",[t._v(".zip")]),t._v(" 包的专用停止服务脚本，")])]),t._v(" "),r("h3",{attrs:{id:"src-目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#src-目录"}},[t._v("#")]),t._v(" "),r("code",[t._v("src")]),t._v(" 目录")]),t._v(" "),r("p",[t._v("应用源码，都在这里了。")]),t._v(" "),r("blockquote",[r("p",[r("code",[t._v("serve.package.json")]),t._v(" 切记勿删，这个是打包时的必需品。")])]),t._v(" "),r("p",[t._v("下面介绍应用启动，即，浏览器打开 "),r("code",[t._v("URL")]),t._v(", 回车敲下后，源码的运行大致流程（方便开发者阅读理解，及后续扩展变更）。")]),t._v(" "),r("p",[t._v("程序代码执行路径大致如下：")]),t._v(" "),r("img",{attrs:{src:t.$withBase("/callchain.png"),alt:"call chain"}}),t._v(" "),r("h2",{attrs:{id:"特性列表"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#特性列表"}},[t._v("#")]),t._v(" 特性列表")]),t._v(" "),r("ul",[r("li",[r("RouterLink",{attrs:{to:"/guide/route.html"}},[t._v("路由")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/guide/layout.html"}},[t._v("布局")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/guide/locale.html"}},[t._v("国际化")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/guide/data.html"}},[t._v("数据")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/guide/theme.html"}},[t._v("主题")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/guide/packaging.html"}},[t._v("打包")])],1)])])}),[],!1,null,null,null);e.default=a.exports}}]);